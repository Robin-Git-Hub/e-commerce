{"ast":null,"code":"import * as Realm from \"realm-web\";\nimport { app } from '../../service/mongoDB-sdk';\nimport { GET_PRODUCTS_FAILURE } from \"../../state/actions/actionTypes\";\nimport { handleLogin, handleLogout, handleAuthErrors } from '../../state/actions/authentication';\n\nconst useAuthentication = dispatch => {\n  function handleUserRegistration(newUser) {\n    return new Promise(resolve => {\n      app.emailPasswordAuth.registerUser(newUser.email, newUser.password).then(() => {\n        const credentials = Realm.Credentials.emailPassword(newUser.email, newUser.password);\n        app.logIn(credentials).then(user => {\n          dispatch(handleLogin(newUser));\n          resolve(user);\n        });\n      }).catch(err => dispatch(handleAuthErrors(err)));\n    });\n  }\n\n  async function handleUserLogout() {\n    var _app$currentUser;\n\n    console.dir(app.currentUser);\n    (_app$currentUser = app.currentUser) === null || _app$currentUser === void 0 ? void 0 : _app$currentUser.logOut().then(console.log(\"user successfully log out\")).catch(err => console.log(err));\n  }\n\n  async function handleAuthentication() {\n    var _current;\n\n    const currenUser = await app.currentUser;\n    GET_PRODUCTS_FAILURE((_current = current) === null || _current === void 0 ? void 0 : _current.email);\n  }\n\n  return {\n    handleUserRegistration,\n    handleUserLogout,\n    handleUserLogout\n  };\n};\n\nexport default useAuthentication;","map":{"version":3,"sources":["/home/crochet/Bureau/Site E-commerce/client/src/lib/hooks/useAuthentication/index.js"],"names":["Realm","app","GET_PRODUCTS_FAILURE","handleLogin","handleLogout","handleAuthErrors","useAuthentication","dispatch","handleUserRegistration","newUser","Promise","resolve","emailPasswordAuth","registerUser","email","password","then","credentials","Credentials","emailPassword","logIn","user","catch","err","handleUserLogout","console","dir","currentUser","logOut","log","handleAuthentication","currenUser","current"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,WAAvB;AACA,SAASC,GAAT,QAAmB,2BAAnB;AACA,SAASC,oBAAT,QAAqC,iCAArC;AACA,SAASC,WAAT,EAAsBC,YAAtB,EAAoCC,gBAApC,QAA4D,oCAA5D;;AAEA,MAAMC,iBAAiB,GAAIC,QAAD,IAAc;AACpC,WAASC,sBAAT,CAAgCC,OAAhC,EAAyC;AACrC,WAAO,IAAIC,OAAJ,CAAaC,OAAD,IAAa;AAC5BV,MAAAA,GAAG,CAACW,iBAAJ,CACCC,YADD,CACcJ,OAAO,CAACK,KADtB,EAC6BL,OAAO,CAACM,QADrC,EAECC,IAFD,CAEM,MAAM;AACR,cAAMC,WAAW,GAAGjB,KAAK,CAACkB,WAAN,CAAkBC,aAAlB,CAChBV,OAAO,CAACK,KADQ,EAEhBL,OAAO,CAACM,QAFQ,CAApB;AAICd,QAAAA,GAAG,CAACmB,KAAJ,CAAUH,WAAV,EAAuBD,IAAvB,CAA6BK,IAAD,IAAU;AACnCd,UAAAA,QAAQ,CAACJ,WAAW,CAACM,OAAD,CAAZ,CAAR;AACAE,UAAAA,OAAO,CAACU,IAAD,CAAP;AACF,SAHD;AAIJ,OAXD,EAYCC,KAZD,CAYQC,GAAD,IAAShB,QAAQ,CAACF,gBAAgB,CAACkB,GAAD,CAAjB,CAZxB;AAaH,KAdM,CAAP;AAeH;;AAED,iBAAeC,gBAAf,GAAmC;AAAA;;AAC/BC,IAAAA,OAAO,CAACC,GAAR,CAAYzB,GAAG,CAAC0B,WAAhB;AACA,wBAAA1B,GAAG,CAAC0B,WAAJ,sEAAiBC,MAAjB,GACCZ,IADD,CACMS,OAAO,CAACI,GAAR,CAAY,2BAAZ,CADN,EAECP,KAFD,CAEQC,GAAD,IAASE,OAAO,CAACI,GAAR,CAAYN,GAAZ,CAFhB;AAGH;;AAED,iBAAeO,oBAAf,GAAsC;AAAA;;AAClC,UAAMC,UAAU,GAAG,MAAM9B,GAAG,CAAC0B,WAA7B;AACAzB,IAAAA,oBAAoB,aAAC8B,OAAD,6CAAC,SAASlB,KAAV,CAApB;AACH;;AAGD,SAAO;AACHN,IAAAA,sBADG;AAEHgB,IAAAA,gBAFG;AAGHA,IAAAA;AAHG,GAAP;AAKH,CArCD;;AAsCA,eAAelB,iBAAf","sourcesContent":["import * as Realm from \"realm-web\";\nimport { app }from '../../service/mongoDB-sdk'\nimport { GET_PRODUCTS_FAILURE } from \"../../state/actions/actionTypes\";\nimport { handleLogin, handleLogout, handleAuthErrors } from '../../state/actions/authentication'\n\nconst useAuthentication = (dispatch) => {\n    function handleUserRegistration(newUser) {\n        return new Promise((resolve) => {\n            app.emailPasswordAuth\n            .registerUser(newUser.email, newUser.password)\n            .then(() => {\n                const credentials = Realm.Credentials.emailPassword(\n                    newUser.email,\n                    newUser.password\n                );\n                 app.logIn(credentials).then((user) => {\n                    dispatch(handleLogin(newUser));\n                    resolve(user);  \n                 });\n            })\n            .catch((err) => dispatch(handleAuthErrors(err)));\n        });\n    }\n\n    async function handleUserLogout () {\n        console.dir(app.currentUser);\n        app.currentUser?.logOut()\n        .then(console.log(\"user successfully log out\"))\n        .catch((err) => console.log(err));\n    }\n\n    async function handleAuthentication() {\n        const currenUser = await app.currentUser;\n        GET_PRODUCTS_FAILURE(current?.email)\n    }\n    \n\n    return {\n        handleUserRegistration,\n        handleUserLogout,\n        handleUserLogout\n    };\n};\nexport default useAuthentication;"]},"metadata":{},"sourceType":"module"}